<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AkademiTrack.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="AkademiTrack.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="AkademiTrack"
        Background="#F8F9FA"
		Height="500"
		Width="700"
        MinWidth="600"
        MinHeight="500">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>

	<Window.Styles>
		<!-- Force all buttons to always be visible -->
		<Style Selector="Button">
			<Setter Property="IsVisible" Value="True"/>
		</Style>

		<Style Selector="Button:disabled">
			<Setter Property="IsVisible" Value="True"/>
		</Style>

		<!-- Start Button Styles -->
		<Style Selector="Button.start-button">
			<Setter Property="Background" Value="#007ACC"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="CornerRadius" Value="6"/>
			<Setter Property="Padding" Value="20,12"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="MinWidth" Value="160"/>
			<Setter Property="IsVisible" Value="True"/>
		</Style>

		<Style Selector="Button.start-button:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="#005A9E"/>
		</Style>

		<!-- Disabled Start Button Style -->
		<Style Selector="Button.start-button:disabled /template/ ContentPresenter">
			<Setter Property="Background" Value="#CCCCCC"/>
			<Setter Property="TextBlock.Foreground" Value="#888888"/>
		</Style>

		<Style Selector="Button.start-button:disabled">
			<Setter Property="IsVisible" Value="True"/>
			<Setter Property="Opacity" Value="1.0"/>
		</Style>

		<!-- Stop Button Styles -->
		<Style Selector="Button.stop-button">
			<Setter Property="Background" Value="#DC3545"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="CornerRadius" Value="6"/>
			<Setter Property="Padding" Value="20,12"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="MinWidth" Value="160"/>
			<Setter Property="IsVisible" Value="True"/>
		</Style>

		<Style Selector="Button.stop-button:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="#B02A37"/>
		</Style>

		<!-- Disabled Stop Button Style -->
		<Style Selector="Button.stop-button:disabled /template/ ContentPresenter">
			<Setter Property="Background" Value="#CCCCCC"/>
			<Setter Property="TextBlock.Foreground" Value="#888888"/>
		</Style>

		<Style Selector="Button.stop-button:disabled">
			<Setter Property="IsVisible" Value="True"/>
			<Setter Property="Opacity" Value="1.0"/>
		</Style>

		<Style Selector="Button.settings">
			<Setter Property="Background" Value="#6C757D"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="CornerRadius" Value="6"/>
			<Setter Property="Padding" Value="16,10"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="MinWidth" Value="120"/>
		</Style>

		<Style Selector="Button.settings:pointerover">
			<Setter Property="Background" Value="#545B62"/>
		</Style>

		<Style Selector="TextBlock.title">
			<Setter Property="FontSize" Value="32"/>
			<Setter Property="FontWeight" Value="Light"/>
			<Setter Property="Foreground" Value="#212529"/>
			<Setter Property="Margin" Value="0,0,0,8"/>
		</Style>

		<Style Selector="TextBlock.subtitle">
			<Setter Property="FontSize" Value="16"/>
			<Setter Property="FontWeight" Value="Normal"/>
			<Setter Property="Foreground" Value="#6C757D"/>
			<Setter Property="Margin" Value="0,0,0,40"/>
		</Style>

		<Style Selector="TextBlock.info">
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="FontWeight" Value="Normal"/>
			<Setter Property="Foreground" Value="#6C757D"/>
			<Setter Property="Margin" Value="0,0,0,20"/>
			<Setter Property="TextAlignment" Value="Center"/>
		</Style>
	</Window.Styles>

	<Grid>
		<StackPanel HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Spacing="20">

			<!-- App Title -->
			<TextBlock Text="AkademiTrack"
                      Classes="title"
                      HorizontalAlignment="Center"/>

			<TextBlock Text="Automated Attendance System"
                      Classes="subtitle"
                      HorizontalAlignment="Center"/>

			<!-- Info Text -->
			<TextBlock Text="Click Start to begin automated attendance monitoring.&#x0a;The system will handle login and cookie management automatically."
                      Classes="info"
                      HorizontalAlignment="Center"
                      TextWrapping="Wrap"
                      MaxWidth="500"/>

			<!-- Main Control Buttons - Simplified to just Start/Stop -->
			<StackPanel Orientation="Horizontal"
                       HorizontalAlignment="Center"
                       Spacing="16">

				<!-- Start button - handles everything including login -->
				<Button Content="Start Automation"
                       Classes="start-button"
                       Command="{Binding StartAutomationCommand}"
                       IsEnabled="{Binding !IsAutomationRunning}"
                       ToolTip.Tip="Starts automation with automatic login and cookie management"/>

				<!-- Stop button -->
				<Button Content="Stop Automation"
                       Classes="stop-button"
                       Command="{Binding StopAutomationCommand}"
                       IsEnabled="{Binding IsAutomationRunning}"
                       ToolTip.Tip="Stops the automation process"/>
			</StackPanel>

			<!-- Settings Button - Only for advanced users -->
			<StackPanel HorizontalAlignment="Center">
				<Button Content="Advanced Settings"
                       Classes="settings"
                       Command="{Binding OpenSettingsCommand}"
                       ToolTip.Tip="Open cookies file location for manual configuration"/>
			</StackPanel>

			<!-- Status Section -->
			<Border Background="White"
                   CornerRadius="8"
                   Padding="20"
                   Margin="0,20,0,0"
                   BorderThickness="1"
                   BorderBrush="#E9ECEF"
                   MaxWidth="700">

				<StackPanel Spacing="8">
					<TextBlock Text="Status"
                              FontWeight="SemiBold"
                              FontSize="14"
                              Foreground="#495057"/>

					<ScrollViewer MaxHeight="250"
                                 VerticalScrollBarVisibility="Auto">
						<TextBlock Text="{Binding StatusMessage}"
                                  FontSize="14"
                                  Foreground="#6C757D"
                                  TextWrapping="Wrap"/>
					</ScrollViewer>
				</StackPanel>
			</Border>

		</StackPanel>
	</Grid>
</Window>