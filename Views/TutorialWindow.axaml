<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:services="using:AkademiTrack.Services"
             xmlns:vm="using:AkademiTrack.ViewModels"
             mc:Ignorable="d" d:DesignWidth="1100" d:DesignHeight="750"
             x:Class="AkademiTrack.Views.TutorialView"
             x:DataType="vm:MainWindowViewModel">

	<UserControl.Styles>
		<!-- Theme Toggle Button -->
		<Style Selector="Button.theme-toggle">
			<Setter Property="Background" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=CardBackground}"/>
			<Setter Property="BorderBrush" Value="#CCCCCC"/>
			<Setter Property="BorderThickness" Value="1.5"/>
			<Setter Property="CornerRadius" Value="22.5"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="VerticalContentAlignment" Value="Center"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="Effect" Value="{x:Null}"/>
		</Style>

		<Style Selector="Button.theme-toggle:pointerover">
			<Setter Property="Opacity" Value="0.85"/>
			<Setter Property="BorderBrush" Value="#999999"/>
			<Setter Property="Effect" Value="{x:Null}"/>
		</Style>

		<!-- Dashboard Card Style -->
		<Style Selector="Border.dashboard-card">
			<Setter Property="Background" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=CardBackground}"/>
			<Setter Property="BorderBrush" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=CardBorder}"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="CornerRadius" Value="12"/>
			<Setter Property="Padding" Value="20"/>
		</Style>

		<!-- Back Button - Fixed for both light and dark modes -->
		<Style Selector="Button.back-button">
			<Setter Property="Background" Value="#5B9BFF"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="Padding" Value="20,12"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="Cursor" Value="Hand"/>
		</Style>

		<Style Selector="Button.back-button:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="#4080E8"/>
			<Setter Property="TextBlock.Foreground" Value="White"/>
		</Style>

		<Style Selector="Button.back-button:pressed /template/ ContentPresenter">
			<Setter Property="Background" Value="#3670D8"/>
			<Setter Property="TextBlock.Foreground" Value="White"/>
		</Style>

		<!-- Title Styles -->
		<Style Selector="TextBlock.main-title">
			<Setter Property="FontSize" Value="32"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Foreground" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"/>
		</Style>

		<Style Selector="TextBlock.subtitle">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="Normal"/>
			<Setter Property="Foreground" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextSecondary}"/>
		</Style>

		<Style Selector="TextBlock.section-title">
			<Setter Property="FontSize" Value="20"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Foreground" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"/>
			<Setter Property="Margin" Value="0,0,0,12"/>
		</Style>

		<Style Selector="TextBlock.tutorial-text">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="LineHeight" Value="22"/>
			<Setter Property="TextWrapping" Value="Wrap"/>
			<Setter Property="Foreground" Value="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"/>
		</Style>

		<Style Selector="TextBlock.step-number">
			<Setter Property="FontSize" Value="18"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Foreground" Value="#5B9BFF"/>
			<Setter Property="Width" Value="35"/>
			<Setter Property="Height" Value="35"/>
			<Setter Property="TextAlignment" Value="Center"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
		</Style>
	</UserControl.Styles>

	<Grid Margin="30,20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<Grid Grid.Row="0" Margin="0,0,0,30">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<!-- Title Section -->
			<StackPanel Grid.Column="0" VerticalAlignment="Center">
				<TextBlock Text="üìñ Veiledning" Classes="main-title"/>
				<TextBlock Text="L√¶r hvordan du bruker AkademiTrack" Classes="subtitle" Margin="0,4,0,0"/>
			</StackPanel>

			<!-- Action Buttons -->
			<StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12" VerticalAlignment="Top">
				<!-- Back to Dashboard Button -->
				<Button Classes="theme-toggle"
						Content="‚Üê"
						Foreground="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"
						Command="{Binding BackToDashboardCommand}"
						Width="45"
						Height="45"
						FontSize="24"
						ToolTip.Tip="Tilbake til dashboard"
						Cursor="Hand"/>

				<!-- Theme Toggle Button -->
				<Button Classes="theme-toggle"
						Content="{Binding Source={x:Static services:ThemeManager.Instance}, Path=ThemeIcon}"
						Foreground="{Binding Source={x:Static services:ThemeManager.Instance}, Path=ThemeIconColor}"
						Command="{Binding ToggleThemeCommand}"
						Width="45"
						Height="45"
						FontSize="24"
						ToolTip.Tip="Toggle dark/light mode"
						Cursor="Hand"/>
			</StackPanel>
		</Grid>

		<!-- Tutorial Content -->
		<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
			<StackPanel Spacing="20" Margin="0,0,10,0">
				
				<!-- Welcome Section -->
				<Border Classes="dashboard-card">
					<StackPanel Spacing="12">
						<TextBlock Text="Velkommen til AkademiTrack! üëã" Classes="section-title"/>
						<TextBlock Classes="tutorial-text">
							AkademiTrack er et automatisk oppm√∏te-system designet spesielt for elever ved Akademiet. 
							Systemet registrerer automatisk ditt fremm√∏te for STU (studietid) √∏kter, slik at du slipper √• gj√∏re det manuelt hver gang.
						</TextBlock>
					</StackPanel>
				</Border>

				<!-- Getting Started -->
				<Border Classes="dashboard-card">
					<StackPanel Spacing="16">
						<TextBlock Text="üöÄ Kom i gang" Classes="section-title"/>
						
						<!-- Step 1 -->
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							
							<Border Grid.Column="0" 
									Background="{Binding Source={x:Static services:ThemeManager.Instance}, Path=CardBorder}"
									CornerRadius="17.5"
									Width="35"
									Height="35"
									Margin="0,0,12,0">
								<TextBlock Text="1" Classes="step-number"/>
							</Border>
							
							<StackPanel Grid.Column="1" Spacing="4">
								<TextBlock Text="F√∏rste gangs oppsett" 
										   FontWeight="SemiBold" 
										   FontSize="15"
										   Foreground="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"/>
								<TextBlock Classes="tutorial-text">
									F√∏rste gang du starter applikasjonen, m√• du logge inn med dine Feide-detaljer. 
									Dette gj√∏res automatisk ved oppstart, og credentials blir lagret sikkert p√• din maskin.
								</TextBlock>
							</StackPanel>
						</Grid>

						<!-- Step 2 -->
						<Grid Margin="0,8,0,0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							
							<Border Grid.Column="0" 
									Background="{Binding Source={x:Static services:ThemeManager.Instance}, Path=CardBorder}"
									CornerRadius="17.5"
									Width="35"
									Height="35"
									Margin="0,0,12,0">
								<TextBlock Text="2" Classes="step-number"/>
							</Border>
							
							<StackPanel Grid.Column="1" Spacing="4">
								<TextBlock Text="Start automatisering" 
										   FontWeight="SemiBold" 
										   FontSize="15"
										   Foreground="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"/>
								<TextBlock Classes="tutorial-text">
									Klikk p√• "‚ñ∂ Start automatisering" knappen for √• aktivere automatisk oppm√∏teregistrering. 
									Systemet vil overv√•ke dine STU-√∏kter og registrere deg automatisk n√•r registreringsvinduet √•pner.
								</TextBlock>
							</StackPanel>
						</Grid>

						<!-- Step 3 -->
						<Grid Margin="0,8,0,0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							
							<Border Grid.Column="0" 
									Background="{Binding Source={x:Static services:ThemeManager.Instance}, Path=CardBorder}"
									CornerRadius="17.5"
									Width="35"
									Height="35"
									Margin="0,0,12,0">
								<TextBlock Text="3" Classes="step-number"/>
							</Border>
							
							<StackPanel Grid.Column="1" Spacing="4">
								<TextBlock Text="La applikasjonen kj√∏re" 
										   FontWeight="SemiBold" 
										   FontSize="15"
										   Foreground="{Binding Source={x:Static services:ThemeManager.Instance}, Path=TextPrimary}"/>
								<TextBlock Classes="tutorial-text">
									Hold applikasjonen √•pen mens du er p√• skolen. Den vil automatisk registrere fremm√∏te 
									for alle dine STU-√∏kter n√•r riktig tid kommer. Du f√•r varsler n√•r registreringer er fullf√∏rt.
								</TextBlock>
							</StackPanel>
						</Grid>
					</StackPanel>
				</Border>

				<!-- Dashboard Overview -->
				<Border Classes="dashboard-card">
					<StackPanel Spacing="12">
						<TextBlock Text="üìä Dashboard Oversikt" Classes="section-title"/>
						
						<StackPanel Spacing="8">
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">I DAG:</Run>
								<Run> Viser hvor mange STU-√∏kter du har registrert i dag av totalt antall √∏kter.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">NESTE TIME:</Run>
								<Run> Viser din neste time (b√•de STU og vanlige fag).</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">DENNE M√ÖNEDEN:</Run>
								<Run> Totalt antall registrerte STU-√∏kter denne m√•neden med prosentvis fremm√∏te.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">OVER-/UNDERTID:</Run>
								<Run> Viser om du er foran eller bak p√• dine p√•krevde timer. Gr√∏nn = over m√•let, Orange = under m√•let.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">UKENS FREMM√òTE:</Run>
								<Run> Visualisering av ditt fremm√∏te for hele uken (mandag-fredag) med prosentvis fullf√∏ring.</Run>
							</TextBlock>
						</StackPanel>
					</StackPanel>
				</Border>

				<!-- Features -->
				<Border Classes="dashboard-card">
					<StackPanel Spacing="12">
						<TextBlock Text="‚öôÔ∏è Funksjoner" Classes="section-title"/>
						
						<StackPanel Spacing="8">
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">üîÑ Oppdater data:</Run>
								<Run> Henter fersk data fra iskole.net. Hvis cookies er utl√∏pt, re-autentiserer systemet automatisk i bakgrunnen.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">‚öôÔ∏è Innstillinger:</Run>
								<Run> Konfigurer auto-start, notifikasjoner, og andre preferanser.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">üåô/‚òÄÔ∏è Tema:</Run>
								<Run> Bytt mellom m√∏rk og lys modus.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">Auto-restart:</Run>
								<Run> Hvis aktivert i innstillinger, starter automatiseringen automatisk p√• skoledager innenfor skoletid.</Run>
							</TextBlock>
						</StackPanel>
					</StackPanel>
				</Border>

				<!-- Important Notes -->
				<Border Classes="dashboard-card" BorderBrush="#FF9800" BorderThickness="2">
					<StackPanel Spacing="12">
						<TextBlock Text="‚ö†Ô∏è Viktig √• vite" Classes="section-title"/>
						
						<StackPanel Spacing="8">
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">‚Ä¢ Skolens nettverk:</Run>
								<Run> Du M√Ö v√¶re tilkoblet skolens WiFi for at registreringen skal fungere. Appen fortsetter √• kj√∏re hvis du ikke er tilkoblet, men vil ikke kunne registrere f√∏r du kobler til.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">‚Ä¢ Konflikter:</Run>
								<Run> Systemet registrerer IKKE STU-√∏kter som overlapper med andre fag. Du m√• m√∏te opp i det andre faget.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">‚Ä¢ Registreringsvindu:</Run>
								<Run> Hver STU-√∏kt har et spesifikt tidsvindu for registrering. Systemet registrerer automatisk n√•r vinduet √•pner.</Run>
							</TextBlock>
							
							<TextBlock Classes="tutorial-text">
								<Run FontWeight="SemiBold">‚Ä¢ Hold appen √•pen:</Run>
								<Run> For at automatiseringen skal fungere, m√• appen kj√∏re. P√• Mac kan du minimere den, og den vil fortsette √• fungere i bakgrunnen.</Run>
							</TextBlock>
						</StackPanel>
					</StackPanel>
				</Border>

				<!-- Support -->
				<Border Classes="dashboard-card">
					<StackPanel Spacing="12">
						<TextBlock Text="üí¨ Trenger du hjelp?" Classes="section-title"/>
						<TextBlock Classes="tutorial-text">
							Hvis du opplever problemer eller har sp√∏rsm√•l, kan du kontakte utvikleren eller sjekke logger i innstillinger for mer detaljert informasjon om hva som skjer.
						</TextBlock>
					</StackPanel>
				</Border>

				<!-- Back Button at Bottom -->
				<Button Content="‚Üê Tilbake til Dashboard"
						Classes="back-button"
						Command="{Binding BackToDashboardCommand}"
						HorizontalAlignment="Center"
						Margin="0,10,0,20"
						Background="#5B9BFF"
						Foreground="White"/>

			</StackPanel>
		</ScrollViewer>
	</Grid>
</UserControl>